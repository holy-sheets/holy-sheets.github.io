import{_ as i,o as t,c as a,a2 as n}from"./chunks/framework.CAv1dD81.js";const g=JSON.parse('{"title":"JWT Authentication","description":"Comprehensive guide to setting up JWT (Service Account) authentication with HolySheets!.","frontmatter":{"title":"JWT Authentication","description":"Comprehensive guide to setting up JWT (Service Account) authentication with HolySheets!."},"headers":[],"relativePath":"en/authentication/jwt.md","filePath":"en/authentication/jwt.md"}'),e={name:"en/authentication/jwt.md"};function l(h,s,o,p,r,k){return t(),a("div",null,s[0]||(s[0]=[n(`<h1 id="jwt-authentication" tabindex="-1">JWT Authentication <a class="header-anchor" href="#jwt-authentication" aria-label="Permalink to &quot;JWT Authentication&quot;">​</a></h1><p>HolySheets! supports multiple authentication methods to securely interact with your Google Sheets. This guide focuses on <strong>JWT (Service Account) Authentication</strong>, providing step-by-step instructions to configure a service account in Google Cloud Console, integrate it with HolySheets!, and perform a simple data insertion example.</p><h2 id="configuring-jwt-credentials-in-google-cloud-console" tabindex="-1">Configuring JWT Credentials in Google Cloud Console <a class="header-anchor" href="#configuring-jwt-credentials-in-google-cloud-console" aria-label="Permalink to &quot;Configuring JWT Credentials in Google Cloud Console&quot;">​</a></h2><p>To enable HolySheets! to access your Google Sheets securely using JWT, you need to set up a <strong>Service Account</strong> in the Google Cloud Console. Follow these steps to configure the necessary credentials.</p><h2 id="_1-enable-google-sheets-api" tabindex="-1">1. Enable Google Sheets API <a class="header-anchor" href="#_1-enable-google-sheets-api" aria-label="Permalink to &quot;1. Enable Google Sheets API&quot;">​</a></h2><ol><li><p><strong>Access Google Cloud Console:</strong></p><ul><li>Navigate to <a href="https://console.cloud.google.com/" target="_blank" rel="noreferrer">Google Cloud Console</a>.</li></ul></li><li><p><strong>Select or Create a Project:</strong></p><ul><li>Click on the project dropdown at the top-left corner.</li><li>Select an existing project or click <strong>&quot;New Project&quot;</strong> to create a new one.</li></ul></li><li><p><strong>Enable the Google Sheets API:</strong></p><ul><li>From the left sidebar, go to <strong>&quot;APIs &amp; Services&quot; &gt; &quot;Library&quot;</strong>.</li><li>Search for <strong>&quot;Google Sheets API&quot;</strong>.</li><li>Click on <strong>&quot;Google Sheets API&quot;</strong> from the search results.</li><li>Click <strong>&quot;Enable&quot;</strong>.</li></ul></li></ol><h2 id="_2-create-a-service-account" tabindex="-1">2. Create a Service Account <a class="header-anchor" href="#_2-create-a-service-account" aria-label="Permalink to &quot;2. Create a Service Account&quot;">​</a></h2><ol><li><p><strong>Navigate to Service Accounts:</strong></p><ul><li>From the left sidebar, go to <strong>&quot;APIs &amp; Services&quot; &gt; &quot;Credentials&quot;</strong>.</li><li>Click on <strong>&quot;Create Credentials&quot;</strong> and select <strong>&quot;Service Account&quot;</strong>.</li></ul></li><li><p><strong>Configure Service Account Details:</strong></p><ul><li><strong>Service Account Name:</strong> e.g., <code>HolySheets! Service Account</code>.</li><li><strong>Service Account Description:</strong> Optional.</li><li>Click <strong>&quot;Create and Continue&quot;</strong>.</li></ul></li><li><p><strong>Grant Service Account Access to Project:</strong></p><ul><li>Assign appropriate roles. For accessing Google Sheets, roles related to <strong>&quot;Editor&quot;</strong> or <strong>&quot;Sheets API&quot;</strong> are sufficient.</li><li>Click <strong>&quot;Continue&quot;</strong>.</li></ul></li><li><p><strong>Grant Users Access to This Service Account:</strong> (Optional)</p><ul><li>Click <strong>&quot;Done&quot;</strong>.</li></ul></li></ol><h2 id="_3-generate-and-download-service-account-key" tabindex="-1">3. Generate and Download Service Account Key <a class="header-anchor" href="#_3-generate-and-download-service-account-key" aria-label="Permalink to &quot;3. Generate and Download Service Account Key&quot;">​</a></h2><ol><li><p><strong>Create a Key for the Service Account:</strong></p><ul><li>In the <strong>&quot;Credentials&quot;</strong> page, locate your newly created service account.</li><li>Click on the <strong>three dots (⋮)</strong> under <strong>&quot;Actions&quot;</strong> and select <strong>&quot;Manage keys&quot;</strong>.</li><li>Click <strong>&quot;Add Key&quot;</strong> &gt; <strong>&quot;Create new key&quot;</strong>.</li><li>Choose <strong>&quot;JSON&quot;</strong> as the key type and click <strong>&quot;Create&quot;</strong>.</li></ul></li><li><p><strong>Download the Key:</strong></p><ul><li>A JSON key file will be downloaded automatically. <strong>Store this file securely</strong>, as it contains sensitive information.</li><li><strong>Important:</strong> Do not expose this file publicly or commit it to version control systems.</li></ul></li></ol><h2 id="_4-share-your-google-sheet-with-the-service-account" tabindex="-1">4. Share Your Google Sheet with the Service Account <a class="header-anchor" href="#_4-share-your-google-sheet-with-the-service-account" aria-label="Permalink to &quot;4. Share Your Google Sheet with the Service Account&quot;">​</a></h2><ol><li><p><strong>Open Your Google Sheet:</strong></p><ul><li>Navigate to the Google Sheet you intend to access with HolySheets!.</li></ul></li><li><p><strong>Share the Sheet with the Service Account:</strong></p><ul><li>Click the <strong>&quot;Share&quot;</strong> button.</li><li>In the <strong>&quot;Add people and groups&quot;</strong> field, enter the <strong>service account&#39;s email</strong> (found in the JSON key file under <code>client_email</code>).</li><li>Assign <strong>Editor</strong> permissions.</li><li>Click <strong>&quot;Send&quot;</strong>.</li></ul></li></ol><hr><h2 id="_5-integrating-jwt-with-holysheets" tabindex="-1">5. Integrating JWT with HolySheets <a class="header-anchor" href="#_5-integrating-jwt-with-holysheets" aria-label="Permalink to &quot;5. Integrating JWT with HolySheets&quot;">​</a></h2><p>With your service account credentials obtained and your Google Sheet shared with the service account, you can now integrate JWT authentication into your HolySheets! project.</p><h2 id="_6-initializing-the-jwt-client" tabindex="-1">6. Initializing the JWT Client <a class="header-anchor" href="#_6-initializing-the-jwt-client" aria-label="Permalink to &quot;6. Initializing the JWT Client&quot;">​</a></h2><p>Create a file named <code>jwtAuth.ts</code> in your project&#39;s <code>src</code> directory to handle JWT client initialization.</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/jwtAuth.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { google } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;googleapis&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> fs </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;fs&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;path&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> serviceAccountPath</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> path.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">join</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  __dirname,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;..&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">  &#39;path-to-your-service-account-key.json&#39;</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">) </span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// Update the path accordingly</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Initializes the JWT client.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> Configured JWT client.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initializeJWTClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> serviceAccount</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> JSON</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">parse</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    fs.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">readFileSync</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(serviceAccountPath, </span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;utf-8&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jwtClient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> google.auth.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">JWT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    serviceAccount.client_email,</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    undefined</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    serviceAccount.private_key,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    [</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;https://www.googleapis.com/auth/spreadsheets&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">],</span></span>
<span class="line"><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;">    undefined</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  )</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> jwtClient</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span></code></pre></div><p><strong>Notes</strong>:</p><ul><li>Replace <code>path-to-your-service-account-key.json</code> with the actual relative path to your downloaded service account JSON key file.</li><li>Ensure that the key file is excluded from version control by adding it to your .gitignore:</li></ul><div class="language-bash vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">bash</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">path-to-your-service-account-key.json</span></span></code></pre></div><h2 id="_7-integrating-holysheets-with-jwt" tabindex="-1">7. Integrating HolySheets! with JWT <a class="header-anchor" href="#_7-integrating-holysheets-with-jwt" aria-label="Permalink to &quot;7. Integrating HolySheets! with JWT&quot;">​</a></h2><p>Create or update your jwtIndex.ts file in the src directory to set up HolySheets! with the JWT client.</p><div class="language-typescript vp-adaptive-theme"><button title="Copy Code" class="copy"></button><span class="lang">typescript</span><pre class="shiki shiki-themes github-light github-dark vp-code" tabindex="0"><code><span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">// src/jwtIndex.ts</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> HolySheets </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;holysheets&#39;</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">import</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> { initializeJWTClient } </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">from</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;./jwtAuth&#39;</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> spreadsheetId</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;"> &#39;YOUR_SPREADSHEET_ID_HERE&#39;</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> // Replace with your actual Spreadsheet ID</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">/**</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * Initializes the HolySheets instance with JWT authentication.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> *</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> * </span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">@returns</span><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> An instance of HolySheets configured with JWT.</span></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;"> */</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">async</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> function</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initializeHolySheetsJWT</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">() {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  if</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> (</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">!</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">spreadsheetId) {</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">    throw</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> Error</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;SPREADSHEET_ID is not defined.&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  }</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> jwtClient</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> initializeJWTClient</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">()</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> sheets</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> new</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;"> HolySheets</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">({</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    spreadsheetId,</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">    auth: jwtClient</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">  })</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#6A737D;--shiki-dark:#6A737D;">  // Replace &#39;Sheet1&#39; with the name of your sheet/tab</span></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  const</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> table</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> =</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> sheets.</span><span style="--shiki-light:#6F42C1;--shiki-dark:#B392F0;">base</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">&lt;{ </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Name</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">; </span><span style="--shiki-light:#E36209;--shiki-dark:#FFAB70;">Age</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">:</span><span style="--shiki-light:#005CC5;--shiki-dark:#79B8FF;"> string</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> }&gt;(</span><span style="--shiki-light:#032F62;--shiki-dark:#9ECBFF;">&#39;Sheet1&#39;</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">)</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">  return</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> table</span></span>
<span class="line"><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;">}</span></span>
<span class="line"></span>
<span class="line"><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;">export</span><span style="--shiki-light:#D73A49;--shiki-dark:#F97583;"> default</span><span style="--shiki-light:#24292E;--shiki-dark:#E1E4E8;"> initializeHolySheetsJWT</span></span></code></pre></div><p><strong>Notes</strong>:</p><ul><li>Replace <code>YOUR_SPREADSHEET_ID_HERE</code> with your actual Google Sheets ID, which can be found in the sheet’s URL.</li></ul>`,26)]))}const d=i(e,[["render",l]]);export{g as __pageData,d as default};
